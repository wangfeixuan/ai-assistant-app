# 拖延症AI助手项目计划

## 项目概述

**项目名称**: 拖延症AI助手  手机 app
**项目目标**: 解决拖延症人群的启动难问题  
**技术栈**: Python + Web前端 + 移动端 (后续发布到Apple Store)  
**开发时间**: 预计4-6周  
**商业模式**: 免费版 + 付费高级功能  
**协作模式**: 多人协作开发，实时同步进度  

## 核心功能

### 1. AI任务拆解助手
- 用户输入任务关键词
- AI自动生成超具体的实现步骤
- 支持各种类型任务的智能拆解

**示例效果**:
```
输入: 背20个单词
输出:
- 先背前10个
- 复习默写前10个
- 背后10个
- 复习默写后10个

输入: 洗澡  
输出:
- 从沙发/床/椅子上起立
- 收拾洗澡所需毛巾和衣服
- 进入浴室
- 打开音乐（选择）
- 放下手机
- 脱衣服
- 开始洗澡
```

### 2. 每日To-Do List
- 自动将AI拆解的任务添加到清单
- 点击任务显示详细实现步骤
- 任务完成状态管理
- 每日清单重置功能
- 数据永久化存储
- 自动清理90天前的历史数据

### 3. 用户系统
- 用户注册与登录功能
- 个人数据安全存储
- 跨设备数据同步

### 4. 个人主页
- **主题切换功能**:
  - 默认商务风: 极简设计，蓝色主色调，专业简洁
  - 可爱风: 小猫小狗元素，马卡龙色系，温馨可爱
- 用户设置管理
- 使用统计展示

### 5. 商业化功能
- 免费版基础功能
- 付费版高级功能
- Apple Store发布准备

## 前端UI设计规范

### 页面结构设计

#### 模式1: 主界面
- **AI助手区域**:
  - 输入框：用户输入任务关键词（如"背20个单词"）
  - 提交按钮：触发AI任务拆解
  - 结果展示：AI返回的详细步骤列表

- **导航区域**:
  - 每日to-do：显示任务列表
  - AI助手：对话界面
  - 个人主页：用户设置和功能

- **个人主页功能**:
  - 常见问题：用户帮助文档
  - 新功能许愿：用户反馈收集
  - 付费升级：商业化功能入口
  - 更换主题：商务风/可爱风切换

#### 模式2: 任务详情页
- **任务标题区域**：显示具体任务名称
- **步骤列表区域**：
  - 每个步骤带复选框
  - 可标记完成状态
  - 进度可视化显示
- **操作按钮**：
  - 返回按钮：回到主界面
  - 完成任务：标记整个任务完成

### 交互设计原则
- 简洁直观的操作流程
- 清晰的视觉层次
- 友好的反馈机制
- 流畅的页面切换动画

## 多人协作机制

### 项目管理
- **实时进度同步**：所有团队成员可查看最新项目状态
- **任务分工明确**：前端、后端、UI设计、测试等角色分工
- **版本控制**：使用Git进行代码管理
- **文档同步**：项目计划实时更新，所有成员可见

### 沟通协调
- **定期会议**：每日站会同步进度和问题
- **问题跟踪**：及时记录和解决开发中的问题
- **代码审查**：确保代码质量和一致性

## 技术架构

### 后端 (Python)
- **框架**: Flask/FastAPI
- **AI集成**: OpenAI API 或本地AI模型
- **数据存储**: PostgreSQL (生产环境)
- **数据库管理**: Navicat Premium Lite
- **用户认证**: JWT Token + OAuth2
- **任务拆解引擎**: 自定义提示词模板
- **数据清理**: 定时任务清理90天前数据
- **支付集成**: Apple Pay / 微信支付

### 前端 (Web)
- **技术**: HTML5 + CSS3 + JavaScript
- **UI框架**: Tailwind CSS + 自定义主题系统
- **交互**: AJAX异步通信
- **响应式设计**: 支持移动端
- **主题系统**: 动态切换商务风/可爱风
- **动画效果**: CSS3 + JavaScript动画
- **UI设计**: 已完成原型设计，包含主界面和任务详情页

### 移动端 (后续)
- **iOS**: Swift + UIKit
- **跨平台**: React Native (可选)
- **App Store**: 发布与付费功能

### 部署
- **参考**: https://www.bilibili.com/video/BV1W7QZYMEus?t=2.2
- **平台**: 云服务器 (阿里云/腾讯云)
- **容器化**: Docker (可选)

## 快速开始

### 环境要求
- Python 3.8+
- PostgreSQL 12+
- Node.js 16+ (前端开发)

### 虚拟环境设置（推荐）
```bash
#  方法1 使用 conda（推荐）
conda create -n procrastination-ai python=3.9
conda activate procrastination-ai

```

### 安装依赖
```bash
# 安装Python依赖
pip install -r requirements.txt

# 设置环境变量
cp .env.example .env
# 编辑.env文件，配置数据库连接和API密钥
```

### 数据库设置
```bash
# 创建数据库
createdb procrastination_ai

# 运行数据库迁移
flask db upgrade
```

### 启动应用
```bash
# 开发模式启动
python backend/app.py

# 或使用Flask命令
export FLASK_APP=backend/app.py
export FLASK_ENV=development
flask run
```

## API接口文档

### 认证相关
- `POST /api/auth/register` - 用户注册
- `POST /api/auth/login` - 用户登录
- `GET /api/auth/profile` - 获取用户资料
- `PUT /api/auth/profile` - 更新用户资料

### 任务管理
- `GET /api/tasks/` - 获取任务列表
- `POST /api/tasks/` - 创建新任务（AI拆解）
- `GET /api/tasks/{id}` - 获取任务详情
- `PUT /api/tasks/{id}` - 更新任务
- `DELETE /api/tasks/{id}` - 删除任务

### AI服务
- `POST /api/ai/decompose` - AI任务拆解
- `GET /api/ai/templates` - 获取任务模板

### 示例用法
```
输入: "背20个单词"
输出:
- 准备学习材料和笔记本
- 找一个安静的学习环境
- 将单词分成小组（每组5-10个）
- 先学习第一组单词的发音和意思
- 用单词造句加深理解
- 复习第一组单词
- 学习第二组单词
- 将两组单词混合复习
- 进行小测试检验记忆效果
- 记录学习进度和难点
```

## 开发计划

### 第一阶段: 基础架构 (4-5天)
- [x] 项目需求整理与功能规划
- [ ] 搭建Python项目结构
- [ ] 配置开发环境
- [ ] **数据库环境准备**:
  - [ ] 安装PostgreSQL数据库
  - [ ] 配置Navicat Premium Lite连接
  - [ ] 创建项目数据库
  - [ ] 设计数据表结构 (用户表、任务表、主题表等)
- [ ] 创建基础API框架
- [ ] 实现用户认证系统

### 第二阶段: 核心功能开发 (7-9天)
- [ ] 实现AI任务拆解引擎
- [ ] 开发任务拆解API接口
- [ ] 实现To-Do List后端逻辑
- [ ] 创建数据持久化功能
- [ ] 实现90天数据自动清理
- [ ] 开发用户注册/登录API
- [ ] 编写单元测试

### 第三阶段: 前端开发 (6-8天)
- [x] 设计UI界面原型 (已完成草图设计)
- [ ] **主界面实现** (模式1):
  - [ ] AI助手对话框 (输入任务关键词)
  - [ ] AI返回结果展示区域
  - [ ] 每日to-do列表页面
  - [ ] 个人主页 (常见问题、新功能许愿、付费升级、更换主题)
- [ ] **任务详情页实现** (模式2):
  - [ ] 任务标题显示
  - [ ] 步骤列表与复选框
  - [ ] 返回按钮功能
  - [ ] 进度跟踪显示
- [ ] 实现主题切换系统
- [ ] 实现用户登录/注册界面
- [ ] 集成前后端交互
- [ ] 优化用户体验

### 第四阶段: 集成测试与部署 (3-4天)
- [ ] 系统集成测试
- [ ] 数据清理功能测试
- [ ] 主题切换功能测试
- [ ] 性能优化
- [ ] 部署到生产环境
- [ ] 用户测试与反馈收集

### 第五阶段: 商业化准备 (5-7天)
- [ ] 付费功能开发
- [ ] Apple Store开发者账号申请
- [ ] App Store审核准备
- [ ] 支付系统集成
- [ ] 法律条款与隐私政策
- [ ] 营销材料准备

## 项目文件结构

```
拖延症AI助手/
├── backend/
│   ├── app.py              # 主应用入口
│   ├── models/             # 数据模型
│   │   ├── user.py         # 用户模型
│   │   ├── task.py         # 任务模型
│   │   └── theme.py        # 主题配置模型
│   ├── api/                # API接口
│   │   ├── auth.py         # 用户认证API
│   │   ├── tasks.py        # 任务管理API
│   │   └── ai.py           # AI拆解API
│   ├── services/           # 业务逻辑
│   │   ├── ai_service.py   # AI任务拆解服务
│   │   ├── auth_service.py # 认证服务
│   │   └── cleanup_service.py # 数据清理服务
│   ├── utils/              # 工具函数
│   ├── migrations/         # 数据库迁移
│   └── config.py           # 配置文件
├── frontend/
│   ├── index.html          # 主页面
│   ├── login.html          # 登录页面
│   ├── profile.html        # 个人主页
│   ├── css/                # 样式文件
│   │   ├── business-theme.css # 商务风主题
│   │   ├── cute-theme.css     # 可爱风主题
│   │   └── common.css         # 通用样式
│   ├── js/                 # JavaScript文件
│   │   ├── auth.js         # 认证相关
│   │   ├── theme.js        # 主题切换
│   │   └── main.js         # 主要功能
│   └── assets/             # 静态资源
│       ├── icons/          # 图标资源
│       └── images/         # 图片资源
├── mobile/                 # 移动端 (后续)
│   ├── ios/                # iOS应用
│   └── android/            # Android应用 (可选)
├── tests/                  # 测试文件
├── docs/                   # 项目文档
├── requirements.txt        # Python依赖
├── docker-compose.yml      # Docker配置
└── README.md              # 项目说明
```

## 关键技术点

### AI任务拆解算法
- 使用GPT模型进行任务分解
- 设计专门的提示词模板
- 针对不同任务类型优化拆解策略

- **可爱风主题**:
  - 小猫小狗卡通元素
  - 马卡龙色系 (粉色、薄荷绿、柠檬黄)
  - 圆润的界面设计，可爱的字体
  - 可爱的动画效果

## 成功指标

### 技术指标
- [ ] AI能准确拆解80%以上的常见任务
- [ ] 用户界面响应时间 < 2秒
- [ ] 支持至少1000个并发用户
- [ ] 数据清理功能正常运行，无性能影响
- [ ] 主题切换响应时间 < 0.5秒

### 用户体验指标
- [ ] 用户任务完成率提升30%以上
- [ ] 用户留存率 > 60% (7天)
- [ ] 主题切换使用率 > 40%
- [ ] 用户满意度评分 > 4.5/5

### 商业指标
- [ ] 付费转化率 > 5%
- [ ] 月活跃用户 > 10000
- [ ] App Store评分 > 4.0

## 风险与应对

**技术风险**:
- AI拆解质量不稳定 → 建立任务模板库，人工优化
- 服务器性能瓶颈 → 采用缓存和负载均衡

**产品风险**:
- 用户接受度低 → 持续收集反馈，快速迭代
- 功能过于复杂 → 保持简洁，专注核心功能

## 后续扩展

### 短期扩展 (3个月内)
- 小程序版本开发
- 智能提醒功能
- 更多主题选择
- 任务模板库

### 中期扩展 (6个月内)
- 社交分享功能
- 团队协作功能
- 数据分析与报告
- AI助手个性化

### 长期扩展 (1年内)
- 多语言支持
- 企业版功能
- 第三方应用集成
- 智能习惯养成

## 贡献指南

1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 创建 Pull Request

## 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 联系方式

项目链接: [https://github.com/your-username/procrastination-ai-assistant](https://github.com/your-username/procrastination-ai-assistant)

---

**当前状态**: Python后端基础架构已完成，完整需求分析完成  
**下一步**: Flutter移动端开发  
**预计完成时间**: 
- Flutter MVP版本: 2025年8月中旬
- 完整版本: 2025年9月底
- Apple Store发布: 2025年10月

---

# Flutter 迁移计划

## 项目备份状态
✅ **已完成** - 项目已备份到 `/Users/wangfeixuan/小ai-backup-[时间戳]`

## 迁移策略：并行开发（安全模式）

### 阶段一：环境准备
- [x] 退出base环境
- [ ] 安装 Flutter SDK（进行中）
- [x] 配置开发环境（VS Code + Flutter插件）
- [x] 创建第一个 Flutter 项目 (`flutter_ai_assistant/`)
- [x] 搭建项目基础架构
- [x] 实现核心功能模块结构

### 阶段二：功能对照分析
基于现有 HTML 项目分析：

#### 当前 HTML 项目功能清单
- [ ] 用户认证系统（登录/注册）
- [ ] 主题切换（商务风/可爱风）→ 已升级为5色主题系统
- [ ] 每日鼓励语录功能
- [ ] AI 助手界面
- [ ] 番茄钟功能（已集成）
- [ ] 响应式布局

#### Flutter 对应实现计划
- [x] Flutter 项目架构 → 完整的模块化结构 (`lib/features/`)
- [ ] Flutter 认证页面 → 对应 `auth.js` (`lib/features/auth/`)
- [x] Flutter 主题系统基础 → 对应新的5色主题系统 (`lib/core/themes/`)
- [x] Flutter 每日语录组件 → 对应 HTML 顶部语录功能 (`lib/features/daily_quote/`)
- [x] Flutter AI 聊天界面 → 对应主要交互页面 (`lib/features/ai_chat/`)
- [x] Flutter 番茄钟组件 → 对应集成的番茄钟功能 (`lib/features/pomodoro/`)
- [x] Flutter 响应式设计 → 使用 Flutter 布局组件
- [x] Flutter 待办事项 → 任务管理功能 (`lib/features/todo/`)
- [x] Flutter 个人资料 → 用户设置页面 (`lib/features/profile/`)

### 阶段三：逐步实现
1. **Week 1**: ✅ 搭建 Flutter 基础框架 (已完成)
2. **Week 2**: ✅ 实现项目架构和核心组件 (已完成)
3. **Week 3**: ✅ 实现番茄钟功能 (已完成)
4. **Week 4**: 当前进行 - 完善认证系统和5色主题
5. **Week 5**: 实现核心 AI 助手功能和后端集成
6. **Week 6**: 完善、测试和优化

### 安全保障
- ✅ 原 HTML 项目保持不变
- ✅ Flutter 项目独立开发
- ✅ 可随时回退到 HTML 版本
- ✅ 逐功能验证，确保不丢失任何特性

## 技术对照表

| HTML/CSS/JS | Flutter/Dart | 说明 |
|-------------|--------------|------|
| HTML 标签 | Widget | UI 组件 |
| CSS 样式 | Theme/Style | 样式系统 |
| JavaScript | Dart | 编程逻辑 |
| DOM 操作 | setState() | 状态管理 |
| 本地存储 | SharedPreferences | 数据持久化 |
| 番茄钟JS | Timer Widget | 计时器组件 |

## 当前状态 (2025-07-29)
- [x] 环境准备：退出base环境
- [ ] Flutter SDK安装中（通过Homebrew）
- [x] Flutter项目已创建 (`flutter_ai_assistant/`)
- [x] 项目架构已搭建（模块化设计）
- [x] 番茄钟功能已实现并可用
- [x] 核心组件架构已完成
- [x] 功能对照文档已完善

## 下一步行动
1. 等待Flutter SDK安装完成
2. 完善认证系统实现
3. 实现5色主题切换功能
4. 集成后端API接口
5. 实现AI助手聊天功能

## 项目亮点
- ✨ **完整的模块化架构**: 按功能分组，易于维护
- ✨ **番茄钟功能已完成**: 包含完整的计时器和模式切换
- ✨ **跨平台设计**: Flutter原生支持iOS和Android
- ✨ **主题系统升级**: 从2种主题升级为5色主题系统

## Flutter开发进展

### 第一阶段：核心架构（已完成 ✅）
- [x] Flutter项目创建和环境配置
- [x] 项目模块化架构搭建
- [x] 底部导航栏实现
- [x] 基础主题系统（商务风/可爱风）
- [x] 每日语录功能完整实现
- [x] 番茄钟功能完整实现
- [x] Provider状态管理集成
- [x] SharedPreferences数据持久化
- [x] 功能对照文档完善

### 第二阶段：核心功能开发（进行中 🚧）
- [ ] **用户认证系统**
  - [ ] 登录/注册界面设计
  - [ ] JWT Token管理
  - [ ] 用户状态持久化
  - [ ] 密码加密和验证

- [ ] **AI助手聊天功能**
  - [ ] 聊天界面UI设计
  - [ ] 消息列表组件
  - [ ] AI API集成
  - [ ] 任务拆解结果展示

- [ ] **待办事项管理**
  - [ ] 任务列表界面
  - [ ] 任务添加/编辑/删除
  - [ ] 任务状态管理
  - [ ] 数据同步功能

### 第三阶段：功能增强（计划中 📋）
- [ ] **5色主题系统升级**
  - [ ] 主题色选择器组件
  - [ ] 5种配色方案设计
  - [ ] 主题切换动画效果
  - [ ] 个人页面主题设置

- [ ] **后端API集成**
  - [ ] HTTP服务封装
  - [ ] API错误处理
  - [ ] 网络状态管理
  - [ ] 数据缓存策略

### 第四阶段：优化完善（后续 🔮）
- [ ] 动画效果和交互优化
- [ ] 性能优化和内存管理
- [ ] 错误处理和异常捕获
- [ ] 单元测试和集成测试
- [ ] 国际化支持
- [ ] 无障碍功能支持

## 当前优先级任务

### 🎯 本周目标：完成用户认证系统
1. **设计认证界面**
   - 创建登录/注册页面
   - 实现表单验证
   - 添加加载状态指示

2. **实现认证逻辑**
   - JWT Token处理
   - 用户状态管理
   - 自动登录功能

3. **集成后端API**
   - 配置HTTP客户端
   - 实现认证接口调用
   - 处理网络错误

### 📅 下周目标：AI助手聊天功能
1. **聊天界面开发**
   - 消息气泡设计
   - 输入框和发送按钮
   - 消息列表滚动

2. **AI集成**
   - 任务拆解API调用
   - 结果解析和展示
   - 错误处理机制

## 项目亮点
- ✨ **完整的模块化架构**: 按功能分组，易于维护
- ✨ **番茄钟功能已完成**: 包含完整的计时器和模式切换
- ✨ **跨平台设计**: Flutter原生支持iOS和Android
